<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Classes - Arend Theorem Prover</title>
<meta name="description" content="The Arend Theorem Prover">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Arend Theorem Prover">
<meta property="og:title" content="Classes">
<meta property="og:url" content="https://arend-lang.github.io/documentation/language-reference/definitions/classes.html">


  <meta property="og:description" content="The Arend Theorem Prover">












<link rel="canonical" href="https://arend-lang.github.io/documentation/language-reference/definitions/classes.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Arend",
      "url": "https://arend-lang.github.io/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Arend Theorem Prover Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Arend Theorem Prover
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about">About</a>
            </li><li class="masthead__menu-item">
              <a href="/documentation">Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/download">Download</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      



<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>

  
  
  
  

  
  
  

  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/documentation/getting-started"><span class="nav__sub-title">Getting Started</span></a>
        

        
      </li>
    
      <li>
        
          
          

          <a href="/documentation/language-reference"><span class="nav__sub-title">Language Reference</span></a>
        

        
        <ul>
          
            
            

            

            <li><a href="/documentation/language-reference/lexical-structure" class="">Lexical structure</a></li>

            
            
            
          
            
            

            

            <li><a href="/documentation/language-reference/definitions" class="">Definitions</a></li>

            
            
            
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/modules" class="">&nbsp;&nbsp;&nbsp;&nbsp;Modules</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/parameters" class="">&nbsp;&nbsp;&nbsp;&nbsp;Parameters</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/functions" class="">&nbsp;&nbsp;&nbsp;&nbsp;Functions</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/data" class="">&nbsp;&nbsp;&nbsp;&nbsp;Data</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/hits" class="">&nbsp;&nbsp;&nbsp;&nbsp;Higher inductive types</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/records" class="">&nbsp;&nbsp;&nbsp;&nbsp;Records</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/classes" class="active">&nbsp;&nbsp;&nbsp;&nbsp;Classes</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/metas" class="">&nbsp;&nbsp;&nbsp;&nbsp;Meta definitions</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/coercion" class="">&nbsp;&nbsp;&nbsp;&nbsp;Coercion</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/level" class="">&nbsp;&nbsp;&nbsp;&nbsp;Level</a></li>
              
            
          
            
            

            

            <li><a href="/documentation/language-reference/expressions" class="">Expressions</a></li>

            
            
            
          
            
            

            

            <li><a href="/documentation/language-reference/prelude" class="">Prelude</a></li>

            
            
            
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/documentation/tutorial"><span class="nav__sub-title">Tutorial</span></a>
        

        
        <ul>
          
            
            

            

            <li><a href="/documentation/tutorial/PartI" class="">Part I: Dependent Types</a></li>

            
            
            
          
            
            

            

            <li><a href="/documentation/tutorial/PartII" class="">Part II: Homotopy Type Theory</a></li>

            
            
            
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/documentation/libraries"><span class="nav__sub-title">Libraries</span></a>
        

        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Classes">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Classes
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>A <em>class</em> is a record that has several useful properties.
A class is defined in the same way as a record, but it begins with the keyword <span class="inl-highlight"><span class="k">\class</span></span> instead of <span class="inl-highlight"><span class="k">\record</span></span>.
Classes can extend other classes and records and vice versa.
The first explicit parameter of a class is called its <em>classifying field</em>.
Classes are implicitly coerced to the type of the classifying field.
Let us consider an example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\class</span> Semigroup (E <span class="o">:</span> <span class="kt">\Set</span>)
  <span class="o">|</span> <span class="k">\infixl</span> <span class="n">7</span> <span class="o">*</span> <span class="o">:</span> E <span class="o">-&gt;</span> E <span class="o">-&gt;</span> E
  <span class="o">|</span> <span class="o">*</span>-assoc (x y z <span class="o">:</span> E) <span class="o">:</span> (x <span class="o">*</span> y) <span class="o">*</span> z <span class="o">=</span> x <span class="o">*</span> (y <span class="o">*</span> z)

<span class="k">\func</span> square {S <span class="o">:</span> Semigroup} (x <span class="o">:</span> S) <span class="o">=&gt;</span> x <span class="o">*</span> x</code></pre></div></div>

<p>It is allowed to write <span class="inl-highlight">x <span class="o">:</span> S</span> instead of <span class="inl-highlight">x <span class="o">:</span> S.E</span> since <span class="inl-highlight">S</span> is implicitly coerced to an element of type <span class="inl-highlight"><span class="kt">\Set</span></span>, that is <span class="inl-highlight">S.E</span>.</p>

<p>In case a parameter of a definition has type, which is an <a href="../expressions/class-ext">extension</a> <span class="inl-highlight">C { … }</span> of <span class="inl-highlight">C</span>,
it is marked as a <em>local instance</em> of class <span class="inl-highlight">C</span>. Implicit parameter <span class="inl-highlight"><span class="k">\this</span></span> of a field of class <span class="inl-highlight">C</span> is also a local instance.</p>

<p>If a parameter <span class="inl-highlight">p <span class="o">:</span> C { … }</span> of a definition <span class="inl-highlight">f</span> is a local instance, then the corresponding implicit argument of <span class="inl-highlight">f</span> can be inferred by the instance inference algorithm.
It looks for the first available instance <span class="inl-highlight">v <span class="o">:</span> C { … }</span> such that the expected value of the classifying field coincides with the value of the classifying field in <span class="inl-highlight">v</span>. 
For instance, the function <span class="inl-highlight">square</span> in the example above has one local instance <span class="inl-highlight">S</span> of the class <span class="inl-highlight">Semigroup</span>.
The field <span class="inl-highlight"><span class="o">*</span></span> of the class <span class="inl-highlight">Semigroup</span> is used in the body of <span class="inl-highlight">square</span> and the expected type of its call in <span class="inl-highlight">x <span class="o">*</span> x</span> is 
<span class="inl-highlight">S.E <span class="o">-&gt;</span> S.E <span class="o">-&gt;</span> <span class="g">{?}</span></span>. This implies that the expected value of the classifying field is <span class="inl-highlight">S.E</span>,
which coincides with the value of the classifying field in <span class="inl-highlight">S</span>, so this instance is inferred as the implicit argument of <span class="inl-highlight"><span class="o">*</span></span>.</p>

<h2 id="classifying-fields">Classifying fields</h2>

<p>The classifying field can be specified explicitly with keyword <span class="inl-highlight"><span class="k">\classifying</span></span> as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\class</span> C (A <span class="o">:</span> <span class="kt">\Set</span>) (<span class="k">\classifying</span> B <span class="o">:</span> <span class="kt">\Set</span>)
  <span class="o">|</span> f <span class="o">:</span> B <span class="o">-&gt;</span> A

<span class="k">\func</span> test {c <span class="o">:</span> C} (x <span class="o">:</span> c) <span class="o">=&gt;</span> f x</code></pre></div></div>

<p>Since field <span class="inl-highlight">B</span> is marked as classifying, the type of <span class="inl-highlight">x</span> is <span class="inl-highlight">c.B</span> and the instance for <span class="inl-highlight">f</span> will be successfully inferred.</p>

<p>It is also possible to define a class without classifying fields.
If the class has some explicit parameters, then this can be done using keyword <span class="inl-highlight"><span class="k">\noclassifying</span></span>, which is written after the name of the class.</p>

<h2 id="instances">Instances</h2>

<p>It is also possible to define <em>global instances</em>.
To do this, one needs to use the keyword <span class="inl-highlight"><span class="k">\instance</span></span>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\instance</span> NatSemigroup <span class="o">:</span> Semigroup Nat
  <span class="o">|</span> <span class="o">*</span> <span class="o">=&gt;</span> Nat.<span class="o">*</span>
  <span class="o">|</span> <span class="o">*</span>-assoc <span class="o">=&gt;</span> <span class="g">{?}</span> <span class="c">-- the proof is omitted</span></code></pre></div></div>

<p>A global instance is just a function, defined by <a href="functions#copattern-matching">copattern matching</a>.
It can be used as an ordinary function.
The only difference with an ordinary function is that it can only be defined by copattern matching and must define an
instance of a class.
Also, the classifying field of an instance must be a data or a record applied to some arguments and if some parameters
of the instance have a class as a type, its classifying field must be an argument of the classifying field of the 
resulting instance.</p>

<p>If there is no local instance with the expected classifying field, then such an instance will be searched among
global instances.
There is no backtracking, so the first appropriate instance will be chosen.
A global instance is appropriate in a usage if the expected classifying field is the same data or record
as the data or the record in the classifying field of the instance. If this holds, the global instance
is appropriate even if the data or the record are applied to different arguments.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/JetBrains/Arend" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://twitter.com/ArendLang" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> Twitter</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Arend. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
