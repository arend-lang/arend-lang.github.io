<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Records - Arend Theorem Prover</title>
<meta name="description" content="The Arend Theorem Prover">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Arend Theorem Prover">
<meta property="og:title" content="Records">
<meta property="og:url" content="https://arend-lang.github.io/documentation/language-reference/definitions/records.html">













<link rel="canonical" href="https://arend-lang.github.io/documentation/language-reference/definitions/records.html">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Arend Theorem Prover Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Arend Theorem Prover</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/documentation" >Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/download" >Download</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>

  
  
  
  

  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/documentation/getting-started"><span class="nav__sub-title">Getting Started</span></a>
        

        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Language Reference</span>
        

        
        <ul>
          
            
            

            

            <li><a href="/documentation/language-reference/lexical-structure" class="">Lexical structure</a></li>

            
          
            
            

            

            <li><a href="/documentation/language-reference/definitions" class="">Definitions</a></li>

            
              
              

              

              <li><a href="/documentation/language-reference/definitions/modules" class="">&nbsp;&nbsp;&nbsp;&nbsp;Modules</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/parameters" class="">&nbsp;&nbsp;&nbsp;&nbsp;Parameters</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/functions" class="">&nbsp;&nbsp;&nbsp;&nbsp;Functions</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/data" class="">&nbsp;&nbsp;&nbsp;&nbsp;Data</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/hits" class="">&nbsp;&nbsp;&nbsp;&nbsp;Higher inductive types</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/records" class="active">&nbsp;&nbsp;&nbsp;&nbsp;Records</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/classes" class="">&nbsp;&nbsp;&nbsp;&nbsp;Classes</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/coercion" class="">&nbsp;&nbsp;&nbsp;&nbsp;Coercion</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/level" class="">&nbsp;&nbsp;&nbsp;&nbsp;Level</a></li>
            
          
            
            

            

            <li><a href="/documentation/language-reference/expressions" class="">Expressions</a></li>

            
              
              

              

              <li><a href="/documentation/language-reference/expressions/goals" class="">&nbsp;&nbsp;&nbsp;&nbsp;Goals</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/universes" class="">&nbsp;&nbsp;&nbsp;&nbsp;Universes</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/pi" class="">&nbsp;&nbsp;&nbsp;&nbsp;Pi types</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/sigma" class="">&nbsp;&nbsp;&nbsp;&nbsp;Sigma types</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/let" class="">&nbsp;&nbsp;&nbsp;&nbsp;Let</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/case" class="">&nbsp;&nbsp;&nbsp;&nbsp;Case</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/class-ext" class="">&nbsp;&nbsp;&nbsp;&nbsp;Class extensions</a></li>
            
          
            
            

            

            <li><a href="/documentation/language-reference/prelude" class="">Prelude</a></li>

            
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/documentation/libraries"><span class="nav__sub-title">Libraries</span></a>
        

        
      </li>
    
  </ul>
</nav>

    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Records">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Records
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Records</h4></header>
              <ul class="toc__menu">
  <li><a href="#properties">Properties</a></li>
  <li><a href="#extensions">Extensions</a></li>
  <li><a href="#this">This</a></li>
</ul>
            </nav>
          </aside>
        
        <p>A <em>record</em> is a <a href="/language-reference/expressions/sigma">Sigma type</a> with named projections.
The basic syntax looks like this:</p>

<pre><code class="language-arend">\record R (p_1 : A_1) ... (p_n : A_n) {
  | f_1 : B_1
  ...
  | f_k : B_k
}
</code></pre>

<p>where <code class="highlighter-rouge">f_1</code>, … <code class="highlighter-rouge">f_k</code>, <code class="highlighter-rouge">p_1</code>, … <code class="highlighter-rouge">p_n</code> are <em>fields</em> of <code class="highlighter-rouge">R</code>. Note that records do not have parameters
and <code class="highlighter-rouge">p_1</code>, … <code class="highlighter-rouge">p_n</code> are also fields of <code class="highlighter-rouge">R</code>.
The only difference between <code class="highlighter-rouge">p_i</code> and <code class="highlighter-rouge">f_j</code> is that <code class="highlighter-rouge">f_j</code> are visible in the scope of <code class="highlighter-rouge">R</code> and <code class="highlighter-rouge">p_i</code> are not:</p>

<pre><code class="language-arend">\func test1 =&gt; f_1
\func test2 =&gt; R.f_1
\func test3 =&gt; R.p_1

-- p_1 is not in scope in the following function:
-- \func test4 =&gt; p_1
</code></pre>

<p>It is also possible to write <code class="highlighter-rouge">\field f_i : B_i</code> instead of <code class="highlighter-rouge">| f_i : B_i</code>, but there is a difference between these
notations, which is discussed <a href="#properties">here</a>.</p>

<p>Fields can be accessed using projection functions:</p>
<pre><code class="language-arend">\func test5 (x : R) =&gt; R.p_1 {x}
\func test6 (x : R) =&gt; f_1 {x}
</code></pre>

<p>An alternative way to access fields is provided by the following syntax:</p>
<pre><code class="language-arend">\func test5' (x : R) =&gt; x.p_1
\func test6' (x : R) =&gt; x.f_1
</code></pre>

<p>This syntax is allowed only when the expression before <code class="highlighter-rouge">.</code> is a variable with an explicitly specified type which is a record.
If <code class="highlighter-rouge">x : R</code> and <code class="highlighter-rouge">f</code> is a field of <code class="highlighter-rouge">R</code>, then <code class="highlighter-rouge">x.f</code> is equivalent to <code class="highlighter-rouge">R.f {x}</code>.</p>

<p>The type <code class="highlighter-rouge">A_i</code> can depend on variables <code class="highlighter-rouge">p_1</code>, … <code class="highlighter-rouge">p_{i-1}</code>.
The type <code class="highlighter-rouge">B_i</code> can depend on variables <code class="highlighter-rouge">p_1</code>, … <code class="highlighter-rouge">p_n</code>, <code class="highlighter-rouge">f_1</code>, … <code class="highlighter-rouge">f_{i-1}</code>.</p>

<p>Records are essentially Sigma types. For example, the record <code class="highlighter-rouge">R</code> above is equivalent to the Sigma type
<code class="highlighter-rouge">\Sigma (p_1 : A_1) ... (p_n : A_n) (f_1 : B_1) ... (f_k : B_k)</code>.</p>

<p>Instances of type <code class="highlighter-rouge">R</code> can be created using <em>new expression</em>. Any of the variants of the syntax listed below can be used,
they are all equivalent. 
See <a href="/language-reference/expressions/class-ext">this section</a> for more information about new expressions and related
constructions.</p>

<pre><code class="language-arend">\func r1 =&gt; \new R a_1 ... a_n { | f_1 =&gt; b_1 ... | f_k =&gt; b_k }
\func r2 =&gt; \new R { | p_1 =&gt; a_1 ... | p_n =&gt; a_n | f_1 =&gt; b_1 ... | f_k =&gt; b_k }
\func r3 =&gt; \new R a_1 ... a_n b_1 ... b_k
\func r4 =&gt; \new R a_1 ... a_i { | p_{i+1} =&gt; a_{i+1} ... | p_n =&gt; a_n | f_1 =&gt; b_1 ... | f_k =&gt; b_k }
\func r5 =&gt; \new R a_1 ... a_n b_1 ... b_i { f_{i+1} =&gt; b_{i+1} ... | f_k =&gt; b_k }
</code></pre>

<p>The same function can also be defined using <a href="/language-reference/definitions/functions/#copattern-matching">copattern matching</a>:</p>
<pre><code class="language-arend">\func r6 : R \cowith
  | p_1 =&gt; a_1
  ...
  | p_n =&gt; a_n
  | f_1 =&gt; b_1
  ...
  | f_k =&gt; b_k
</code></pre>

<p>Records satisfy the eta rule.
This means that the expression <code class="highlighter-rouge">\new R r.p_1 ... r.p_n r.f_1 ... r.f_k</code> is equivalent to <code class="highlighter-rouge">r</code>.</p>

<h2 id="properties">Properties</h2>

<p>Some fields can be marked as a <em>property</em>.
This is done by using the keyword <code class="highlighter-rouge">\property</code> instead of <code class="highlighter-rouge">\field</code>:</p>

<pre><code class="language-arend">\record NegativeInt {
  \field x : Int
  \property isNeg : x &lt; 0
}
</code></pre>

<p>The type of a property must be a proposition, otherwise the definition does not typecheck.</p>

<p>If <code class="highlighter-rouge">A</code> is a proposition, then <code class="highlighter-rouge">| f : A</code> is also marked as a property. In this case, <code class="highlighter-rouge">f</code> can be defined as a
normal field, which is not a property, by writing <code class="highlighter-rouge">\field f : A</code>.</p>

<p>Properties do not evaluate.
Thus, they are related to fields in the same way as <a href="/language-reference/definitions/functions/#lemmas">lemmas</a> are related to functions.
For example, consider the following function:</p>

<pre><code class="language-arend">\func test (x : Int) (p : x &lt; 0) =&gt; isNeg {\new NegativeInt x p}
</code></pre>

<p>Then <code class="highlighter-rouge">test x p</code> evaluates to <code class="highlighter-rouge">p</code> if <code class="highlighter-rouge">isNeg</code> is not a property and does not evaluate if it is.</p>

<h2 id="extensions">Extensions</h2>

<p>An extension <code class="highlighter-rouge">S</code> of a record <code class="highlighter-rouge">R</code> is another record which adds some fields to <code class="highlighter-rouge">R</code> and implements some of the fields of <code class="highlighter-rouge">R</code>.
The record <code class="highlighter-rouge">R</code> is called a <em>super class</em> of <code class="highlighter-rouge">S</code> and <code class="highlighter-rouge">S</code> is called a <em>subclass</em> of <code class="highlighter-rouge">R</code>. If <code class="highlighter-rouge">R</code> is the definition of
a record from the beginning of this page, then an extension <code class="highlighter-rouge">S</code> of <code class="highlighter-rouge">R</code> can be defined as follows:</p>

<pre><code class="language-arend">\record S (r_1 : D_1) ... (r_t : D_t) \extends R {
  | g_1 : C_1
  ...
  | g_m : C_m
  | p_{i_1} =&gt; a_{i_1}
  ...
  | p_{i_q} =&gt; a_{i_q}
  | f_{j_1} =&gt; b_{j_1}
  ...
  | f_{j_s} =&gt; b_{j_s}
}
</code></pre>

<p>Here expressions <code class="highlighter-rouge">a_i</code> and <code class="highlighter-rouge">b_j</code> have types <code class="highlighter-rouge">A_i</code> and <code class="highlighter-rouge">B_j</code> respectively.
Expressions <code class="highlighter-rouge">a_i</code> and <code class="highlighter-rouge">b_j</code> may refer to any field of <code class="highlighter-rouge">S</code>, but implementations must not form a cycle.</p>

<p>The type <code class="highlighter-rouge">S</code> is a subtype of <code class="highlighter-rouge">R</code>. That is, every expression of type <code class="highlighter-rouge">S</code> is also of type <code class="highlighter-rouge">R</code>.</p>

<p>A record is equivalent to the Sigma type, consisting of all of its unimplemented fields.
For example, consider the following records:</p>

<pre><code class="language-arend">\record C (x y : Nat) {
  | x&lt;=y : x &lt;= y
  | y&lt;=0 : y &lt;= 0
}

\record D \extends C {
  | y =&gt; x
  | x&lt;=y =&gt; &lt;=-reflexive x
}
</code></pre>

<p>Then <code class="highlighter-rouge">D</code> is equivalent to <code class="highlighter-rouge">\Sigma (x : Nat) (x &lt;= 0)</code>:</p>

<pre><code class="language-arend">\func fromD (d : D) : \Sigma (x : Nat) (x &lt;= 0) =&gt; (d.x, d.y&lt;=0)
\func toD (p : \Sigma (x : Nat) (x &lt;= 0)) =&gt; \new D p.1 p.2
\func fromToD (d : D) : toD (fromD d) = d =&gt; idp
\func toFromD (p : \Sigma (x : Nat) (x &lt;= 0)) : fromD (toD p) = p =&gt; idp
</code></pre>

<p>where <code class="highlighter-rouge">idp</code> is the proof by reflexivity.
This works since both records and Sigma types satisfy eta rules.</p>

<p>A record can extend several records.
If these records extend some base record themselves, then the fields of this base record will not be repeated in the final record.
For example, consider the following records:</p>

<pre><code class="language-arend">\record A (x : Nat)
\record B \extends A
\record C \extends A
\record D \extends B,C
</code></pre>

<p>Then <code class="highlighter-rouge">D</code> has a single field <code class="highlighter-rouge">x</code>.
If super classes have fields with the same name which are not defined in some common super class, then the final record
will have several different fields with the same name.
In order to access these fields, fully qualified names should be used:</p>

<pre><code class="language-arend">\record B (x : Nat)
\record C (x : Nat)
\record D \extends B,C

\func fromD (d : D) : \Sigma Nat Nat =&gt; (B.x {d}, C.x {d})
\func toD (p : \Sigma Nat Nat) =&gt; \new D p.1 p.2
\func fromToD (d : D) : toD (fromD d) = d =&gt; idp
\func toFromD (p : \Sigma Nat Nat) : fromD (toD p) = p =&gt; idp
</code></pre>

<h2 id="this">This</h2>

<p>Every field of a record <code class="highlighter-rouge">R</code> has additional implicit parameter of type <code class="highlighter-rouge">R</code>, which can be referred to with the keyword <code class="highlighter-rouge">\this</code>:</p>

<pre><code class="language-arend">\record R (X : \Type) (t : X -&gt; X)

\func f (r : R) =&gt; r.t

\record S \extends R {
  | x : X
  | p : f \this x = x
}
</code></pre>

<p>The keyword <code class="highlighter-rouge">\this</code> can appear only in arguments of definitions and only in those arguments, which in turn satisfy this condition.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/JetBrains/Arend" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://twitter.com/ArendLang" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> Twitter</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Arend. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










  </body>
</html>
