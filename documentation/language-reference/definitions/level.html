<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Level - Arend Theorem Prover</title>
<meta name="description" content="The Arend Theorem Prover">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Arend Theorem Prover">
<meta property="og:title" content="Level">
<meta property="og:url" content="https://arend-lang.github.io/documentation/language-reference/definitions/level.html">













<link rel="canonical" href="https://arend-lang.github.io/documentation/language-reference/definitions/level.html">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Arend Theorem Prover Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Arend Theorem Prover</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/documentation" >Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/download" >Download</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      



<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>

  
  
  
  

  
  
  

  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/documentation/getting-started"><span class="nav__sub-title">Getting Started</span></a>
        

        
      </li>
    
      <li>
        
          
          

          <a href="/documentation/language-reference"><span class="nav__sub-title">Language Reference</span></a>
        

        
        <ul>
          
            
            

            

            <li><a href="/documentation/language-reference/lexical-structure" class="">Lexical structure</a></li>

            
            
            
          
            
            

            

            <li><a href="/documentation/language-reference/definitions" class="">Definitions</a></li>

            
            
            
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/modules" class="">&nbsp;&nbsp;&nbsp;&nbsp;Modules</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/parameters" class="">&nbsp;&nbsp;&nbsp;&nbsp;Parameters</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/functions" class="">&nbsp;&nbsp;&nbsp;&nbsp;Functions</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/data" class="">&nbsp;&nbsp;&nbsp;&nbsp;Data</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/hits" class="">&nbsp;&nbsp;&nbsp;&nbsp;Higher inductive types</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/records" class="">&nbsp;&nbsp;&nbsp;&nbsp;Records</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/classes" class="">&nbsp;&nbsp;&nbsp;&nbsp;Classes</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/coercion" class="">&nbsp;&nbsp;&nbsp;&nbsp;Coercion</a></li>
              
                
                

                

                <li><a href="/documentation/language-reference/definitions/level" class="active">&nbsp;&nbsp;&nbsp;&nbsp;Level</a></li>
              
            
          
            
            

            

            <li><a href="/documentation/language-reference/expressions" class="">Expressions</a></li>

            
            
            
          
            
            

            

            <li><a href="/documentation/language-reference/prelude" class="">Prelude</a></li>

            
            
            
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/documentation/libraries"><span class="nav__sub-title">Libraries</span></a>
        

        
      </li>
    
  </ul>
</nav>

    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Level">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Level
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Level</h4></header>
              <ul class="toc__menu">
  <li><a href="#use-level">Use level</a></li>
  <li><a href="#level-of-a-type">Level of a type</a></li>
  <li><a href="#use-level-for-functions">Use level for functions</a></li>
</ul>
            </nav>
          </aside>
        
        <p>This module is devoted to a number of tools useful for working with homotopy levels of <a href="../expressions/universes">universes</a>.</p>

<h2 id="use-level">Use level</h2>

<p>The homotopy level of a definition is inferred automatically, but sometimes it is possible to prove that it has a smaller level.
For example, we can define the following data types:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\data</span> Empty
<span class="k">\data</span> Dec (P <span class="o">:</span> <span class="kt">\Prop</span>) <span class="o">|</span> yes P <span class="o">|</span> no (P <span class="o">-&gt;</span> Empty)</code></pre></div></div>

<p>The type of <span class="inl-highlight">Empty</span> is inferred to <span class="inl-highlight"><span class="kt">\Prop</span></span>, which is the right universe for the type.
However, this is not as easy for the type <span class="inl-highlight">Dec P</span>: the type of <span class="inl-highlight">Dec P</span> is inferred to <span class="inl-highlight"><span class="kt">\Set0</span></span>,
whereas it can be proven that <span class="inl-highlight">Dec P</span> is (-1)-type.
<span class="inl-highlight">Dec</span> can be placed in <span class="inl-highlight"><span class="kt">\Prop</span></span> by writing the proof, that any two elements of this type are equal, in the <span class="inl-highlight"><span class="k">\where</span></span> block of <span class="inl-highlight">Dec</span>.
The proof must be written in the corresponding function, starting with keywords <span class="inl-highlight"><span class="k">\use</span> <span class="k">\level</span></span> instead of <span class="inl-highlight"><span class="k">\func</span></span>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\data</span> Empty
<span class="k">\data</span> Dec (P <span class="o">:</span> <span class="kt">\Prop</span>) <span class="o">|</span> yes P <span class="o">|</span> no (P <span class="o">-&gt;</span> Empty)
  <span class="k">\where</span>
    <span class="k">\use</span> <span class="k">\level</span> isProp {P <span class="o">:</span> <span class="kt">\Prop</span>} (d1 d2 <span class="o">:</span> Dec P) <span class="o">:</span> d1 <span class="o">=</span> d2
      <span class="o">|</span> yes x1<span class="o">,</span> yes x2 <span class="o">=&gt;</span> path (<span class="k">\lam</span> i <span class="o">=&gt;</span> yes (Path.inProp x1 x2 <span class="o">@</span> i))
      <span class="o">|</span> yes x1<span class="o">,</span> no e2 <span class="o">=&gt;</span> <span class="k">\case</span> e2 x1 <span class="k">\with</span> {}
      <span class="o">|</span> no e1<span class="o">,</span> yes x2 <span class="o">=&gt;</span> <span class="k">\case</span> e1 x2 <span class="k">\with</span> {}
      <span class="o">|</span> no e1<span class="o">,</span> no e2 <span class="o">=&gt;</span> path (<span class="k">\lam</span> i <span class="o">=&gt;</span> no (<span class="k">\lam</span> x <span class="o">=&gt;</span> (<span class="k">\case</span> e1 x <span class="k">\return</span> e1 x <span class="o">=</span> e2 x <span class="k">\with</span> {}) <span class="o">@</span> i))</code></pre></div></div>

<p>Functions <span class="inl-highlight"><span class="k">\use</span> <span class="k">\level</span></span> can be specified for <span class="inl-highlight"><span class="k">\data</span></span>, <span class="inl-highlight"><span class="k">\record</span></span>, <span class="inl-highlight"><span class="k">\class</span></span>, and <span class="inl-highlight"><span class="k">\func</span></span> (for functions they work differently, <a href="#use-level-for-functions">see below</a>) definitions.
They must have a particular type.
First parameters of such a function must be parameters of the data type (or the function) or (some) fields of the class.
The rest of parameters together with the result type must prove that the data type (or the function, or the class) has some homotopy level.
That is, it must prove <span class="inl-highlight">ofHLevel (D p_1 … p_k) n</span> for some constant <span class="inl-highlight">n</span>,
where <span class="inl-highlight">D</span> is the data type (or the function, or the class), <span class="inl-highlight">p_1<span class="o">,</span> … p_k</span> are its parameters (or fields), and <span class="inl-highlight">ofHLevel</span> is defined as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\func</span> <span class="k">\infix</span> <span class="n">2</span> ofHLevel_-1+ (A <span class="o">:</span> <span class="kt">\Type</span>) (n <span class="o">:</span> Nat) <span class="o">:</span> <span class="kt">\Type</span> <span class="k">\elim</span> n
  <span class="o">|</span> <span class="n">0</span> <span class="o">=&gt;</span> <span class="k">\Pi</span> (a a' <span class="o">:</span> A) <span class="o">-&gt;</span> a <span class="o">=</span> a'
  <span class="o">|</span> suc n <span class="o">=&gt;</span> <span class="k">\Pi</span> (a a' <span class="o">:</span> A) <span class="o">-&gt;</span> (a <span class="o">=</span> a') ofHLevel_-1+ n</code></pre></div></div>

<h2 id="level-of-a-type">Level of a type</h2>

<p>Sometimes we need to know that some type has a certain homotopy level.
For example, the result type of a <a href="functions#lemmas">lemma</a> 
or a <a href="records#properties">property</a> must be a proposition.
If the type does not belong to the corresponding universe, but it can be proved that it has the correct homotopy level,
the keyword <span class="inl-highlight"><span class="k">\level</span></span> can be used to convince the typechecker to accept the definition.
This keywords can be specified in the result type of a function, a lemma, a field, or a case expression.
Its first argument is the type and the second is the proof that it belongs to some homotopy level.</p>

<p>For example, if <span class="inl-highlight">A</span> is a type such that <span class="inl-highlight">p <span class="o">:</span> <span class="k">\Pi</span> (x y <span class="o">:</span> A) <span class="o">-&gt;</span> x <span class="o">=</span> y</span>, then a lemma that proves <span class="inl-highlight">A</span> can be defined as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\lemma</span> lem <span class="o">:</span> <span class="k">\level</span> A p <span class="o">=&gt;</span> <span class="g">{?}</span></code></pre></div></div>

<p>Similarly, a property of type <span class="inl-highlight">A</span> can be defined as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\record</span> R {
  <span class="k">\property</span> p <span class="o">:</span> <span class="k">\level</span> A p
}</code></pre></div></div>

<p>While defining a function or a case expression over a truncated type with values in <span class="inl-highlight">A</span>,
some clauses can be omitted if <span class="inl-highlight">A</span> belongs to an appropriate universe.
If it is not, but there is a proof that it has the required homotopy level, then the keyword <span class="inl-highlight"><span class="k">\level</span></span> can be used to
convince the typechecker that some clauses can be omitted.
For example, if <span class="inl-highlight">Trunc</span> is a propositional truncation with constructor <span class="inl-highlight">inT <span class="o">:</span> A <span class="o">-&gt;</span> Trunc A</span>, <span class="inl-highlight">A</span> and <span class="inl-highlight">B</span> are types,
<span class="inl-highlight">g <span class="o">:</span> A <span class="o">-&gt;</span> B</span> is function, and <span class="inl-highlight">p <span class="o">:</span> <span class="k">\Pi</span> (x y <span class="o">:</span> B) <span class="o">-&gt;</span> x <span class="o">=</span> y</span>, then the function, extending <span class="inl-highlight">g</span> to <span class="inl-highlight">Trunc A</span> can be defined simply as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\func</span> f (t <span class="o">:</span> Trunc A) <span class="o">:</span> <span class="k">\level</span> B p
  <span class="o">|</span> inT a <span class="o">=&gt;</span> g a</code></pre></div></div>

<p>Similarly, the keyword <span class="inl-highlight"><span class="k">\level</span></span> can be used in case expressions:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\func</span> f' (t <span class="o">:</span> Trunc A) <span class="o">=&gt;</span> <span class="k">\case</span> t <span class="k">\return</span> <span class="k">\level</span> B p <span class="k">\with</span> {
  <span class="o">|</span> inT a <span class="o">=&gt;</span> g a
}</code></pre></div></div>

<h2 id="use-level-for-functions">Use level for functions</h2>

<p>If a <span class="inl-highlight"><span class="k">\use</span> <span class="k">\level</span></span> function defined for some function <span class="inl-highlight">f</span>, this does not change the definition of <span class="inl-highlight">f</span> at all.
So, in this case, <span class="inl-highlight"><span class="k">\use</span> <span class="k">\level</span></span> is just a syntactic sugar.
If some function <span class="inl-highlight">f</span> is defined with a <span class="inl-highlight"><span class="k">\use</span> <span class="k">\level</span></span> annotation, this does not change the type of <span class="inl-highlight">f</span>,
but it will be treated as a type in a lower universe in situations described in <a href="#level-of-a-type">Level of a type</a>.</p>

<p>For example, we can prove that <span class="inl-highlight">isProp</span> is itslef a proposition and then define lemmas which prove that some type is a proposition:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\func</span> isProp (A <span class="o">:</span> <span class="kt">\Type</span>) <span class="o">=&gt;</span> <span class="k">\Pi</span> (a a' <span class="o">:</span> A) <span class="o">-&gt;</span> a <span class="o">=</span> a'
  <span class="k">\where</span> <span class="k">\use</span> <span class="k">\level</span> proof (A <span class="o">:</span> <span class="kt">\Type</span>) <span class="o">:</span> isProp (isProp A) <span class="o">=&gt;</span> <span class="g">{?}</span> <span class="c">-- the proof is omitted</span>

<span class="k">\lemma</span> lem <span class="o">:</span> isProp (<span class="k">\Sigma</span> (n <span class="o">:</span> Nat) (n <span class="o">=</span> <span class="n">0</span>)) <span class="o">=&gt;</span> <span class="g">{?}</span></code></pre></div></div>

<p>Without <span class="inl-highlight"><span class="k">\use</span> <span class="k">\level</span></span> annotation it would be necessary to specify the <span class="inl-highlight">proof</span> in the definition of <span class="inl-highlight">lem</span>.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/JetBrains/Arend" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://twitter.com/ArendLang" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> Twitter</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Arend. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










  </body>
</html>
