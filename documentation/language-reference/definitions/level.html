<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Level - Arend Theorem Prover</title>
<meta name="description" content="The Arend Theorem Prover">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Arend Theorem Prover">
<meta property="og:title" content="Level">
<meta property="og:url" content="https://arend-lang.github.io/documentation/language-reference/definitions/level.html">













<link rel="canonical" href="https://arend-lang.github.io/documentation/language-reference/definitions/level.html">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Arend Theorem Prover Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Arend Theorem Prover</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/documentation" >Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/download" >Download</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>

  
  
  
  

  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/documentation/getting-started"><span class="nav__sub-title">Getting Started</span></a>
        

        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Language Reference</span>
        

        
        <ul>
          
            
            

            

            <li><a href="/documentation/language-reference/lexical-structure" class="">Lexical structure</a></li>

            
          
            
            

            

            <li><a href="/documentation/language-reference/definitions" class="">Definitions</a></li>

            
              
              

              

              <li><a href="/documentation/language-reference/definitions/modules" class="">&nbsp;&nbsp;&nbsp;&nbsp;Modules</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/parameters" class="">&nbsp;&nbsp;&nbsp;&nbsp;Parameters</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/functions" class="">&nbsp;&nbsp;&nbsp;&nbsp;Functions</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/data" class="">&nbsp;&nbsp;&nbsp;&nbsp;Data</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/hits" class="">&nbsp;&nbsp;&nbsp;&nbsp;Higher inductive types</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/records" class="">&nbsp;&nbsp;&nbsp;&nbsp;Records</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/classes" class="">&nbsp;&nbsp;&nbsp;&nbsp;Classes</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/coercion" class="">&nbsp;&nbsp;&nbsp;&nbsp;Coercion</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/definitions/level" class="active">&nbsp;&nbsp;&nbsp;&nbsp;Level</a></li>
            
          
            
            

            

            <li><a href="/documentation/language-reference/expressions" class="">Expressions</a></li>

            
              
              

              

              <li><a href="/documentation/language-reference/expressions/goals" class="">&nbsp;&nbsp;&nbsp;&nbsp;Goals</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/universes" class="">&nbsp;&nbsp;&nbsp;&nbsp;Universes</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/pi" class="">&nbsp;&nbsp;&nbsp;&nbsp;Pi types</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/sigma" class="">&nbsp;&nbsp;&nbsp;&nbsp;Sigma types</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/let" class="">&nbsp;&nbsp;&nbsp;&nbsp;Let</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/case" class="">&nbsp;&nbsp;&nbsp;&nbsp;Case</a></li>
            
              
              

              

              <li><a href="/documentation/language-reference/expressions/class-ext" class="">&nbsp;&nbsp;&nbsp;&nbsp;Class extensions</a></li>
            
          
            
            

            

            <li><a href="/documentation/language-reference/prelude" class="">Prelude</a></li>

            
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/documentation/libraries"><span class="nav__sub-title">Libraries</span></a>
        

        
      </li>
    
  </ul>
</nav>

    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Level">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Level
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Level</h4></header>
              <ul class="toc__menu">
  <li><a href="#use-level">Use level</a></li>
  <li><a href="#level-of-a-type">Level of a type</a></li>
</ul>
            </nav>
          </aside>
        
        <p>This module is devoted to a number of tools useful for working with homotopy levels of 
<a href="/language-reference/expressions/universes">universes</a>.</p>

<h2 id="use-level">Use level</h2>

<p>The homotopy level of a definition is inferred automatically, but sometimes it is possible to prove that it has a smaller level.
For example, we can define the following data types:</p>
<pre><code class="language-arend">\data Empty
\data Dec (P : \Prop) | yes P | no (P -&gt; Empty)
</code></pre>

<p>The type of <code class="highlighter-rouge">Empty</code> is inferred to <code class="highlighter-rouge">\Prop</code>, which is the right universe for the type.
However, this is not as easy for the type <code class="highlighter-rouge">Dec P</code>: the type of <code class="highlighter-rouge">Dec P</code> is inferred to <code class="highlighter-rouge">\Set0</code>,
whereas it can be proven that <code class="highlighter-rouge">Dec P</code> is (-1)-type.
<code class="highlighter-rouge">Dec</code> can be placed in <code class="highlighter-rouge">\Prop</code> by writing the proof, that any two elements of this type are equal,
in the <code class="highlighter-rouge">\where</code> block of <code class="highlighter-rouge">Dec</code>. The proof must be written in the corresponding function, starting with keywords
<code class="highlighter-rouge">\use \level</code> instead of <code class="highlighter-rouge">\func</code>:</p>
<pre><code class="language-arend">\data Empty
\data Dec (P : \Prop) | yes P | no (P -&gt; Empty)
  \where
    \use \level isProp {P : \Prop} (d1 d2 : Dec P) : d1 = d2
      | yes x1, yes x2 =&gt; path (\lam i =&gt; yes (Path.inProp x1 x2 @ i))
      | yes x1, no e2 =&gt; \case e2 x1 \with {}
      | no e1, yes x2 =&gt; \case e1 x2 \with {}
      | no e1, no e2 =&gt; path (\lam i =&gt; no (\lam x =&gt; (\case e1 x \return e1 x = e2 x \with {}) @ i))
</code></pre>

<p>Functions <code class="highlighter-rouge">\use \level</code> can be specified for <code class="highlighter-rouge">\data</code>, <code class="highlighter-rouge">\class</code>, and <code class="highlighter-rouge">\func</code> definitions.
They must have a particular type.
First parameters of such a function must be parameters of the data type (or the function) or (some) fields of the class.
The rest of parameters together with the result type must prove that the data type (or the function, or the class) has some homotopy level.
That is, it must prove <code class="highlighter-rouge">ofHLevel (D p_1 ... p_k) n</code> for some constant <code class="highlighter-rouge">n</code>, where <code class="highlighter-rouge">D</code> is the data type (or the function, or the class), <code class="highlighter-rouge">p_1</code>, … <code class="highlighter-rouge">p_k</code> are its parameters (or fields), and <code class="highlighter-rouge">ofHLevel</code> is defined as follows:</p>
<pre><code class="language-arend">\func \infix 2 ofHLevel_-1+ (A : \Type) (n : Nat) : \Type \elim n
  | 0 =&gt; \Pi (a a' : A) -&gt; a = a'
  | suc n =&gt; \Pi (a a' : A) -&gt; (a = a') ofHLevel_-1+ n
</code></pre>

<h2 id="level-of-a-type">Level of a type</h2>

<p>Sometimes we need to know that some type has a certain homotopy level.
For example, the result type of a <a href="/language-reference/definitions/functions/#lemmas">lemma</a> 
or a <a href="/language-reference/definitions/records/#properties">property</a> must be a proposition.
If the type does not belong to the corresponding universe, but it can be proved that it has the correct homotopy level,
the keyword <code class="highlighter-rouge">\level</code> can be used to convince the typechecker to accept the definition.
This keywords can be specified in the result type of a function, a lemma, a field, or a case expression.
Its first argument is the type and the second is the proof that it belongs to some homotopy level.</p>

<p>For example, if <code class="highlighter-rouge">A</code> is a type such that <code class="highlighter-rouge">p : \Pi (x y : A) -&gt; x = y</code>, then a lemma that proves <code class="highlighter-rouge">A</code> can be defined as follows:</p>
<pre><code class="language-arend">\lemma lem : \level A p =&gt; ...
</code></pre>

<p>Similarly, a property of type <code class="highlighter-rouge">A</code> can be defined as follows:</p>
<pre><code class="language-arend">\record R {
  \property p : \level A p
}
</code></pre>

<p>While defining a function or a case expression over a truncated type with values in <code class="highlighter-rouge">A</code>, some clauses can be omitted if
<code class="highlighter-rouge">A</code> belongs to an appropriate universe.
If it is not, but there is a proof that it has the required homotopy level, then the keyword <code class="highlighter-rouge">\level</code> can be used to
convince the typechecker that some clauses can be omitted.
For example, if <code class="highlighter-rouge">Trunc</code> is a propositional truncation with constructor <code class="highlighter-rouge">inT : A -&gt; Trunc A</code>, <code class="highlighter-rouge">A</code> and <code class="highlighter-rouge">B</code> are types,
<code class="highlighter-rouge">g : A -&gt; B</code> is function, and <code class="highlighter-rouge">p : \Pi (x y : B) -&gt; x = y</code>, then the function, extending <code class="highlighter-rouge">g</code> to <code class="highlighter-rouge">Trunc A</code> can be
defined simply as follows:</p>
<pre><code class="language-arend">\func f (t : Trunc A) : \level B p
  | inT a =&gt; g a
</code></pre>

<p>Similarly, the keyword <code class="highlighter-rouge">\level</code> can be used in case expressions:</p>
<pre><code class="language-arend">\func f' (t : Trunc A) =&gt; \case t \return \level B p \with {
  | inT a =&gt; g a
}
</code></pre>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://github.com/JetBrains/Arend" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://twitter.com/ArendLang" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> Twitter</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Arend. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>










  </body>
</html>
